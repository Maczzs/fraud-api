<!doctype html>
    <html>
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <title>Fraud Prediction Demo</title>
      <style>
        body { font-family: sans-serif; margin: 2rem; max-width: 760px; }
        label { display:block; margin-top: 0.75rem; }
        input, textarea { width: 100%; padding: 0.5rem; }
        button { margin-top: 1rem; padding: 0.6rem 1rem; cursor: pointer; }
        .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
        .row { display:flex; gap:1rem; }
        .row > div { flex:1; }
      </style>
    </head>
    <body>
      <h1>Credit Card Fraud â€“ Demo Frontend</h1>
      <p>This is a minimal HTML page to call your FastAPI Docker service. Replace <code>API_BASE</code> with your deployed URL.</p>

      <label>API Base (e.g., https://your-cloud-run-url):</label>
      <input id="api" value="http://localhost:8080" />

      <h3>Send JSON with feature names (recommended)</h3>
      <p>Paste your full features JSON here. It must include all feature keys from your training <code>feature_order</code> (e.g., <code>Time</code>, <code>V1</code> ... <code>V28</code>, <code>Amount</code>).</p>
      <textarea id="json" rows="12" class="mono">{ 
  "features": {
    "Time": 10000,
    "V1": -1.23,
    "V2": 0.45,
    "V3": 0.0,
    "V4": 0.0,
    "V5": 0.0,
    "V6": 0.0,
    "V7": 0.0,
    "V8": 0.0,
    "V9": 0.0,
    "V10": 0.0,
    "V11": 0.0,
    "V12": 0.0,
    "V13": 0.0,
    "V14": 0.0,
    "V15": 0.0,
    "V16": 0.0,
    "V17": 0.0,
    "V18": 0.0,
    "V19": 0.0,
    "V20": 0.0,
    "V21": 0.0,
    "V22": 0.0,
    "V23": 0.0,
    "V24": 0.0,
    "V25": 0.0,
    "V26": 0.0,
    "V27": 0.0,
    "V28": 0.0,
    "Amount": 34.56
  }
}</textarea>
      <button onclick="send()">Predict</button>

      <pre id="out" class="mono" style="margin-top:1rem; background:#f5f5f5; padding:1rem;"></pre>

      <script>
        async function send() {
          const base = document.getElementById('api').value.trim().replace(/\/$/, '');
          let payload;
          try {
            payload = JSON.parse(document.getElementById('json').value);
          } catch (e) {
            document.getElementById('out').textContent = 'Invalid JSON: ' + e.message;
            return;
          }
          const res = await fetch(base + '/predict', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(payload)
          });
          const txt = await res.text();
          try { document.getElementById('out').textContent = JSON.stringify(JSON.parse(txt), null, 2); }
          catch { document.getElementById('out').textContent = txt; }
        }
      </script>
    </body>
    </html>